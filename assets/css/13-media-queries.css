/* ===== ADVANCED MEDIA QUERY SYSTEM ===== */

/* Custom Media Queries using CSS Custom Properties */
/* Note: True @custom-media is not yet supported, but this provides a consistent system */

/* ===== VIEWPORT-BASED MEDIA QUERIES ===== */

/* Extra Small Devices */
@media (max-width: 479px) {
  :root {
    --current-breakpoint: 'xs';
    --section-padding-desktop: var(--space-8);
    --content-padding: var(--space-4);
  }
  
  .container {
    padding-inline: var(--space-4);
  }
  
  .hero-container {
    gap: var(--space-8);
  }
  
  .nav-menu {
    gap: var(--space-4);
  }
}

/* Small Devices */
@media (min-width: 480px) and (max-width: 639px) {
  :root {
    --current-breakpoint: 'sm';
    --section-padding-desktop: var(--space-12);
  }
  
  .projects-grid {
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
  }
}

/* Medium Devices */
@media (min-width: 640px) and (max-width: 767px) {
  :root {
    --current-breakpoint: 'md';
    --section-padding-desktop: var(--space-16);
  }
  
  .projects-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xl);
  }
  
  .about-stats {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Large Devices */
@media (min-width: 768px) and (max-width: 1023px) {
  :root {
    --current-breakpoint: 'lg';
  }
  
  .hero-container {
    gap: calc(var(--space-16) * var(--spacing-ratio));
  }
  
  .projects-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Extra Large Devices */
@media (min-width: 1024px) and (max-width: 1279px) {
  :root {
    --current-breakpoint: 'xl';
  }
  
  .projects-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* 2X Large Devices */
@media (min-width: 1280px) {
  :root {
    --current-breakpoint: '2xl';
    --section-padding-desktop: var(--space-32);
  }
  
  .projects-grid {
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 360px), 1fr));
  }
  
  .container {
    max-width: 1400px;
  }
}

/* ===== PREFERENCE-BASED MEDIA QUERIES ===== */

/* High Contrast Mode */
@media (prefers-contrast: high) {
  :root {
    --shadow-subtle: 0 2px 8px 0 rgb(0 0 0 / 0.3);
    --shadow-soft: 0 4px 12px -1px rgb(0 0 0 / 0.3);
    --shadow-card: 0 10px 20px -3px rgb(0 0 0 / 0.3);
  }
  
  .project-card,
  .timeline-content,
  .btn-primary {
    border: 2px solid var(--text-primary);
  }
}

/* Dark Mode Preparation */
@media (prefers-color-scheme: dark) {
  :root {
    --surface-primary: var(--mustard-950);
    --surface-secondary: var(--mustard-900);
    --surface-subtle: var(--mustard-800);
    --text-primary: var(--mustard-100);
    --text-secondary: var(--mustard-200);
    --text-muted: var(--mustard-300);
    --border-subtle: var(--mustard-700);
    --border-light: var(--mustard-600);
  }
  
  .hero {
    background: var(--mustard-800);
  }
}

/* Print Styles Enhancement */
@media print {
  :root {
    --section-padding-desktop: var(--space-8);
    --content-padding: var(--space-4);
  }
  
  .hero-image,
  .hamburger,
  .back-to-home,
  .projects-filter {
    display: none !important;
  }
  
  .hero {
    min-height: auto;
    page-break-after: avoid;
  }
  
  .project-card {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  h1, h2, h3 {
    page-break-after: avoid;
  }
}

/* ===== INTERACTION-BASED MEDIA QUERIES ===== */

/* Fine Pointer (Mouse) */
@media (pointer: fine) {
  .project-card {
    transition: all var(--transition-normal);
  }
  
  .btn-primary {
    transition: all var(--transition-fast);
  }
  
  .skill-tag {
    transition: all var(--transition-fast);
  }
}

/* Coarse Pointer (Touch) */
@media (pointer: coarse) {
  .project-card {
    min-height: 44px; /* Touch target minimum */
  }
  
  .btn-primary,
  .filter-btn,
  .nav-link {
    min-height: 44px;
    padding-block: var(--space-3);
  }
  
  .hamburger {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Hover Capability */
@media (hover: hover) {
  .project-card:hover {
    transform: translateY(-4px);
  }
  
  .stat:hover {
    transform: scale(1.02);
  }
}

/* No Hover (Touch Devices) */
@media (hover: none) {
  .project-card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease-out;
  }
  
  .btn-primary:active {
    transform: scale(0.96);
  }
}

/* ===== ORIENTATION-BASED QUERIES ===== */

@media (orientation: landscape) and (max-height: 500px) {
  .hero {
    min-height: 100vh;
    padding-block: var(--space-8);
  }
  
  .hero-container {
    align-items: center;
  }
}

@media (orientation: portrait) and (max-width: 768px) {
  .hero-image img {
    position: relative;
    width: min(80vw, 400px);
    max-width: 400px;
    margin: 0 auto;
    display: block;
  }
  
  .hero-container {
    grid-template-columns: 1fr;
    text-align: center;
  }
}

/* ===== HERO IMAGE RESPONSIVE SIZING ===== */

/* Extra small screens - constrain image more */
@media (max-width: 479px) {
  .hero-image img {
    width: min(35vw, 280px) !important;
    min-width: 240px !important;
    max-width: 280px !important;
    max-height: calc(100vh - 140px) !important;
  }
}

/* Small to medium screens */
@media (min-width: 480px) and (max-width: 967px) {
  .hero-image img {
    width: min(38vw, 380px) !important;
    min-width: 280px !important;
    max-width: 380px !important;
    max-height: calc(100vh - 120px) !important;
  }
}

/* Large screens but not too large */
@media (min-width: 968px) and (max-width: 1399px) {
  .hero-image img {
    width: min(40vw, 450px) !important;
    min-width: 300px !important;
    max-width: 450px !important;
    max-height: calc(100vh - 100px) !important;
  }
}

/* Very large screens - cap the size */
@media (min-width: 1400px) {
  .hero-image img {
    width: min(35vw, 500px) !important;
    max-width: 500px !important;
    max-height: calc(100vh - 80px) !important;
  }
}

/* Ultra-wide screens - prevent excessive growth */
@media (min-width: 1920px) {
  .hero-image img {
    width: min(30vw, 480px) !important;
    max-width: 480px !important;
  }
}

/* ===== SHAPE-RESPONSIVE ADJUSTMENTS ===== */

/* Simplify shapes on smaller screens */
@media (max-width: 768px) {
  .project-card:nth-child(3n+1) .project-image,
  .project-card:nth-child(3n+2) .project-image,
  .project-card:nth-child(3n+3) .project-image {
    clip-path: none;
    shape-outside: none;
  }
  
  .content-with-shape::before,
  .timeline-content::after,
  .advanced-text-flow::before {
    display: none;
  }
  
  .floating-accent {
    position: static;
    float: none;
    shape-outside: none;
    clip-path: none;
    display: none;
  }
}

/* Enhanced shapes for large screens */
@media (min-width: 1280px) {
  .project-card:nth-child(5n+1) .project-image {
    clip-path: polygon(0 0, 100% 0, 100% 90%, 90% 100%, 0 100%);
  }
  
  .project-card:nth-child(5n+2) .project-image {
    clip-path: polygon(0 0, 90% 0, 100% 10%, 100% 100%, 0 100%);
  }
  
  .project-card:nth-child(5n+3) .project-image {
    clip-path: polygon(10% 0, 100% 0, 100% 100%, 0 100%, 0 10%);
  }
  
  .project-card:nth-child(5n+4) .project-image {
    clip-path: circle(45% at 50% 50%);
  }
  
  .project-card:nth-child(5n+5) .project-image {
    clip-path: ellipse(48% 45% at 50% 50%);
  }
}

/* Shape animations for devices that support hover */
@media (hover: hover) {
  .project-card:hover .project-image {
    transition: clip-path var(--transition-normal) cubic-bezier(0.4, 0.0, 0.2, 1);
  }
  
  .floating-accent {
    transition: 
      clip-path var(--transition-normal) ease-out,
      shape-outside var(--transition-normal) ease-out,
      transform var(--transition-normal) ease-out;
  }
  
  .floating-accent:hover {
    transform: rotate(45deg) scale(1.1);
  }
}