<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyectos - Bárbara M Portfolio</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main" class="skip-to-content">Saltar al contenido principal</a>
    <header role="banner">
        <nav class="navbar" role="navigation" aria-label="Navegación principal">
        <div class="nav-container">
            <a href="../" class="nav-logo" aria-label="Ir al inicio del portfolio">Portfolio</a>
            <ul class="nav-menu" role="menubar" aria-label="Menú de navegación">
                <li role="none"><a href="../index.html#home" class="nav-link" role="menuitem">Inicio</a></li>
                <li role="none"><a href="../index.html#about" class="nav-link" role="menuitem">Sobre mí</a></li>
                <li role="none"><a href="../index.html#experience" class="nav-link" role="menuitem">Experiencia</a></li>
                <li role="none"><a href="../index.html#education" class="nav-link" role="menuitem">Formación</a></li>
                <li role="none"><a href="./" class="nav-link active" role="menuitem" aria-current="page">Proyectos</a></li>
                <li role="none"><a href="../index.html#contact" class="nav-link" role="menuitem">Contacto</a></li>
            </ul>
            <button class="hamburger" aria-label="Abrir menú de navegación" aria-expanded="false" aria-controls="nav-menu" type="button">
                <span class="bar" aria-hidden="true"></span>
                <span class="bar" aria-hidden="true"></span>
                <span class="bar" aria-hidden="true"></span>
            </button>
        </div>
        </nav>
    </header>

    <a href="../index.html" class="back-to-home" aria-label="Volver al inicio del portfolio" role="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="visually-hidden">Volver al inicio</span>
    </a>

    <main id="main" role="main">
        <section class="projects-header" role="banner" aria-labelledby="projects-title">
            <div class="container">
                <h1 id="projects-title">Mis Proyectos</h1>
                <p class="section-subtitle" role="text">
                    Una colección completa de mi trabajo de diseño UX, con casos de estudio, 
                    sistemas de diseño y experiencias digitales que he creado.
                </p>
            </div>
        </section>

        <section class="projects-content" aria-labelledby="projects-filter-title">
            <div class="container">
                <h2 id="projects-filter-title" class="visually-hidden">Filtros de proyectos</h2>
                <div class="projects-filter" id="projects-filter" role="toolbar" aria-label="Filtros de categoría de proyectos">
                    <button class="filter-btn active" data-filter="all" aria-pressed="true" type="button">Todos los proyectos</button>
                    <button class="filter-btn" data-filter="web" aria-pressed="false" type="button">Diseño Web</button>
                    <button class="filter-btn" data-filter="mobile" aria-pressed="false" type="button">Apps Móviles</button>
                    <button class="filter-btn" data-filter="design-system" aria-pressed="false" type="button">Sistemas de Diseño</button>
                    <button class="filter-btn" data-filter="research" aria-pressed="false" type="button">Investigación UX</button>
                    <button class="filter-btn" data-filter="prototype" aria-pressed="false" type="button">Prototipado</button>
                </div>

                <div class="projects-grid" id="all-projects-grid" role="grid" aria-label="Lista de proyectos">
                    <!-- Projects will be loaded dynamically -->
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <p role="text">&copy; 2024 <span id="footer-name">Bárbara M</span>. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
    <script>
        // Projects page specific JavaScript
        let allProjects = [];
        let currentFilter = 'all';

        // Load all projects
        async function loadAllProjects() {
            try {
                const response = await fetch('../data/projects.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                allProjects = await response.json();
                renderProjects(allProjects);
                updateProjectCount();
            } catch (error) {
                console.warn('Could not load projects:', error);
                showFallbackProjects();
            }
        }

        // Render projects
        function renderProjects(projects) {
            const projectsGrid = document.getElementById('all-projects-grid');
            if (!projectsGrid) return;

            projectsGrid.innerHTML = projects.map((project, index) => `
                <article class="project-card" 
                         data-categories="${project.categories?.join(' ') || ''}" 
                         onclick="window.location.href='${project.slug}/'"
                         role="gridcell"
                         aria-labelledby="project-title-${index}"
                         tabindex="0"
                         onkeydown="if(event.key==='Enter'||event.key===' ')window.location.href='${project.slug}/'">
                    <div class="project-image" role="img" aria-labelledby="project-title-${index}">
                        <img src="${project.image || '../assets/images/project-placeholder.jpg'}" 
                             alt="Imagen del proyecto ${project.title}" 
                             loading="lazy">
                    </div>
                    <div class="project-content">
                        <h3 class="project-title" id="project-title-${index}">${project.title}</h3>
                        <p class="project-description" role="text">${project.shortDescription}</p>
                        <div class="project-tags" role="list" aria-label="Tecnologías utilizadas">
                            ${project.tags?.map(tag => `<span class="project-tag" role="listitem">${tag}</span>`).join('') || ''}
                        </div>
                    </div>
                </article>
            `).join('');
        }

        // Filter projects
        function filterProjects(category) {
            const projectCards = document.querySelectorAll('.project-card');
            
            projectCards.forEach(card => {
                const categories = card.dataset.categories.split(' ');
                if (category === 'all' || categories.includes(category)) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
            
            currentFilter = category;
            updateProjectCount();
        }

        // Update project count
        function updateProjectCount() {
            const visibleProjects = document.querySelectorAll('.project-card:not(.hidden)').length;
            const subtitle = document.querySelector('.section-subtitle');
            if (subtitle) {
                if (currentFilter !== 'all') {
                    const filterName = document.querySelector(`[data-filter="${currentFilter}"]`)?.textContent || currentFilter;
                    subtitle.textContent = `Mostrando ${visibleProjects} proyecto${visibleProjects !== 1 ? 's' : ''} de ${filterName.toLowerCase()}`;
                } else {
                    subtitle.textContent = "Una colección completa de mi trabajo de diseño UX, con casos de estudio, sistemas de diseño y experiencias digitales que he creado.";
                }
            }
        }

        // Initialize filter buttons
        function initializeFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Update ARIA states and active class
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-pressed', 'false');
                    });
                    // Set active button
                    button.classList.add('active');
                    button.setAttribute('aria-pressed', 'true');
                    // Filter projects
                    filterProjects(button.dataset.filter);
                });
            });
        }

        // Show fallback projects if JSON loading fails
        function showFallbackProjects() {
            const fallbackProjects = [
                {
                    title: "Rediseño de Plataforma E-learning",
                    shortDescription: "Rediseño completo de una plataforma de aprendizaje digital centrada en la experiencia del usuario y la accesibilidad.",
                    tags: ["Investigación UX", "Diseño UI", "Prototipado"],
                    categories: ["web", "research"],
                    slug: "plataforma-elearning",
                    image: "../assets/images/project-placeholder.jpg"
                },
                {
                    title: "App Móvil para Gestión Social",
                    shortDescription: "Aplicación móvil para la gestión de casos sociales y seguimiento de usuarios en organizaciones del tercer sector.",
                    tags: ["Diseño Móvil", "UX Research", "Gestión de Datos"],
                    categories: ["mobile", "research"],
                    slug: "app-gestion-social",
                    image: "../assets/images/project-placeholder.jpg"
                },
                {
                    title: "Sistema de Design Tokens",
                    shortDescription: "Creación de un sistema completo de design tokens para garantizar consistencia visual en múltiples productos digitales.",
                    tags: ["Sistema de Diseño", "Design Tokens", "Figma"],
                    categories: ["design-system", "web"],
                    slug: "design-tokens-system",
                    image: "../assets/images/project-placeholder.jpg"
                },
                {
                    title: "Prototipo Interactivo de App Educativa",
                    shortDescription: "Desarrollo de prototipo interactivo para aplicación educativa dirigida a estudiantes de secundaria.",
                    tags: ["Prototipado", "Educación", "Figma", "Testing"],
                    categories: ["prototype", "mobile"],
                    slug: "prototipo-app-educativa",
                    image: "../assets/images/project-placeholder.jpg"
                }
            ];
            
            renderProjects(fallbackProjects);
        }

        // Load profile name for footer
        async function loadProfileName() {
            try {
                const response = await fetch('../data/profile.json');
                if (response.ok) {
                    const profileData = await response.json();
                    const footerName = document.getElementById('footer-name');
                    if (footerName && profileData.name) {
                        footerName.textContent = profileData.name;
                    }
                }
            } catch (error) {
                console.warn('Could not load profile data:', error);
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            await Promise.all([
                loadAllProjects(),
                loadProfileName()
            ]);
            
            initializeFilters();
            
            // Add stagger animation to project cards
            const projectCards = document.querySelectorAll('.project-card');
            projectCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('fade-in-up');
            });
            
            console.log('Projects page initialized successfully!');
        });

        // Add fade-in-up animation
        const style = document.createElement('style');
        style.textContent = `
            .fade-in-up {
                opacity: 0;
                transform: translateY(30px);
                animation: fadeInUp 0.6s ease-out forwards;
            }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>